<!DOCTYPE html>
<html dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>HTML Text Editor &ndash; UI &ndash; Core &ndash; Text Editor</title>
    <link href="../../../favicon.ico" rel="shortcut icon">

    <link href="../../../index.min.css" rel="stylesheet">
    <link href="../../ui.min.css" rel="stylesheet">

  </head>
  <body>

    <header>
        <h1><a href="../../.." rel="prev">Text Editor</a> &rsaquo; <a href="../..">Core</a> &rsaquo; <a href="..">UI</a> &rsaquo; <abbr title="Hyper Text Markup Language">HTML</abbr> Text Editor</h1>
      <p><abbr title="Hyper Text Markup Language">HTML</abbr> text editor plugin.</p>
      <section>
        <p><textarea class="textarea" id="editor"></textarea></p>
        <p id="text-editor-shell-selector" data-shell-path=".."></p>
      </section>
    </header>

    <section>
      <h2 id="section:start">Start</h2>
      <p>Include <a href="../h-t-m-l.min.js" target="_blank"><code>h-t-m-l.min.js</code></a> just after the <a href="../../ui.min.js" target="_blank"><code>ui.min.js</code></a> script:</p>
      <pre><code>&lt;!DOCTYPE html&gt;
&lt;html dir="ltr"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;Test Editor&lt;/title&gt;
    &lt;link href="text-editor/ui.i.min.css" rel="stylesheet"&gt;
    &lt;link href="text-editor/ui.min.css" rel="stylesheet"&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;&lt;textarea id="editor"&gt;&lt;/textarea&gt;&lt;/p&gt;
    &lt;script src="text-editor.min.js"&gt;&lt;/script&gt;
    &lt;script src="text-editor/ui.min.js"&gt;&lt;/script&gt;
    &lt;script src="text-editor/ui/h-t-m-l.min.js"&gt;&lt;/script&gt;
    &lt;script&gt;
    var editor = TE.ui.HTML(document.querySelector('#editor'));
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
      <h2 id="section:configure">Configure</h2>
      <h3>Instance</h3>
      <pre><code>TE.ui.HTML(<var>node</var>, <var>config</var>);</code></pre>
      <ul>
        <li><var>node</var> &rarr; The text area element.</li>
        <li><var>config</var> &rarr; Custom configuration data to override the default configuration data.</li>
      </ul>
      <pre><code>var editor = TE.ui.HTML(document.querySelector('#editor'), { &hellip; });</code></pre>
      <h3>Configuration</h3>
      <p>The available configuration data are:</p>
      <ul>
        <li>Inherits <code>TE.ui()</code> &rarr; <a href="../../ui#section:configure">read more</a></li>
        <li>Inherits <code>TE.ui.HTML()</code>
          <ul>
            <li><code>auto_encode_html</code> &rarr; <var>boolean</var> &middot; Automatically encode <abbr title="Hyper Text Markup Language">HTML</abbr> special characters inside code tags?</li>
            <li><code>auto_p</code> &rarr; <var>boolean</var> &middot; Automatically insert paragraph tags?</li>
            <li><code>states</code> &rarr; <var>object</var>
              <ul>
                <li><code>tr</code> &rarr; <var>array</var> &middot; Minimum and maximum table rows for table tool.</li>
                <li><code>td</code> &rarr; <var>array</var> &middot; Minimum and maximum table columns for table tool.</li>
                <li><code>abbr</code> &rarr; <var>object</var> &middot; List of default abbreviations for abbreviation tool.</li>
              </ul>
            </li>
            <li><code>advance_a</code> &rarr; <var>boolean</var> &middot; Detect external <abbr title="Uniform Resource Locator">URL</abbr> and automatically add <code>rel="nofollow"</code> and <code>target="_blank"</code> attribute to the link markup?</li>
            <li><code>advance_img</code> &rarr; <var>boolean</var> &middot; Insert image with <code>&lt;figure&gt;</code> element as image container and <code>&lt;figcaption&gt;</code> as image caption when title field is defined?</li>
            <li><code>advance_table</code> &rarr; <var>boolean</var> &middot; Include <code>&lt;thead&gt;</code>, <code>&lt;tbody&gt;</code> and <code>&lt;tfoot&gt;</code> markup?</li>
            <li><code>formats</code> &rarr; <var>object</var> &middot; List of default <abbr title="Hyper Text Markup Language">HTML</abbr> formats to be outputted.</li>
          </ul>
        </li>
      </ul>
      <h2 id="section:key">Keyboard Shortcuts</h2>
      <ul>
        <li><kbd>&#8984;+b</kbd> &rarr; Bold</li>
        <li><kbd>&#8984;+g</kbd> &rarr; Image</li>
        <li><kbd>&#8984;+h</kbd> &rarr; Header</li>
        <li><kbd>&#8984;+i</kbd> &rarr; Italic</li>
        <li><kbd>&#8984;+k</kbd> &rarr; Code</li>
        <li><kbd>&#8984;+l</kbd> &rarr; Link</li>
        <li><kbd>&#8984;+q</kbd> &rarr; Quote</li>
        <li><kbd>&#8984;+r</kbd> &rarr; Horizontal Rule</li>
        <li><kbd>&#8984;+t</kbd> &rarr; Table</li>
        <li><kbd>&#8984;+u</kbd> &rarr; Underline</li>
        <li><kbd>&#8984;++</kbd> &rarr; List</li>
        <li><kbd>&#8984;+-</kbd> &rarr; Bullet</li>
        <li><kbd>&#8984;+&#10008;</kbd> &rarr; Strike</li>
        <li><kbd>&#8984;+&darr;</kbd> &rarr; Subscript</li>
        <li><kbd>&#8984;+&uarr;</kbd> &rarr; Superscript</li>
        <li><kbd>&#8984;+&#8629;</kbd> &rarr; Paragraph</li>
        <li><kbd>&#8984;+&#8679;+?</kbd> &rarr; Abbreviation</li>
        <li><kbd>&#8679;+&#8629;</kbd> &rarr; Line Break</li>
        <li><kbd>&#10008;</kbd> &rarr; Clear Format &rarr; Delete</li>
        <li><kbd>&#8677;</kbd> &rarr; Indent &amp; <em>Depends</em></li>
        <li><kbd>&#8679;+&#8677;</kbd> &rarr; Outdent</li>
        <li><kbd>&#8629;</kbd> &rarr; <em>Depends</em></li>
        <li><kbd>&#9003;</kbd> &rarr; <em>Depends</em></li>
      </ul>
      <h3>Depends &rarr; Special Cases</h3>
      <p>Try pressing the <kbd>&#8629;</kbd> key in these position, where <code><mark>|</mark></code> represent the text editor caret.</p>
      <pre><code>lorem ipsum dolor sit amet<mark>|</mark></code></pre>
      <pre><code>&lt;p&gt;<mark>|</mark>&lt;/p&gt;</code></pre>
      <pre><code>&lt;p class="foo"&gt;<mark>|</mark>&lt;/p&gt;</code></pre>
      <pre><code>&lt;p&gt;foo<mark>|</mark>&lt;/p&gt;</code></pre>
      <pre><code>&lt;p class="foo"&gt;foo<mark>|</mark>&lt;/p&gt;</code></pre>
      <pre><code>&lt;ul&gt;
  &lt;li&gt;<mark>|</mark>&lt;/li&gt;
&lt;/ul&gt;</code></pre>
      <pre><code>&lt;ul&gt;
  &lt;li class="foo"&gt;<mark>|</mark>&lt;/li&gt;
&lt;/ul&gt;</code></pre>
      <pre><code>&lt;ul&gt;
  &lt;li&gt;foo<mark>|</mark>&lt;/li&gt;
&lt;/ul&gt;</code></pre>
      <pre><code>&lt;ul&gt;
  &lt;li&gt;&lt;a href="#"&gt;foo&lt;/a&gt;<mark>|</mark>&lt;/li&gt;
&lt;/ul&gt;</code></pre>
      <pre><code>&lt;ul&gt;
  &lt;li class="foo"&gt;&lt;a href="#"&gt;foo&lt;/a&gt;<mark>|</mark>&lt;/li&gt;
&lt;/ul&gt;</code></pre>
      <pre><code>    <mark>|</mark></code></pre>
      <pre><code>"<mark>|</mark>"</code></pre>
      <pre><code>'<mark>|</mark>'</code></pre>
      <pre><code>(<mark>|</mark>)</code></pre>
      <pre><code>{<mark>|</mark>}</code></pre>
      <pre><code>[<mark>|</mark>]</code></pre>
      <pre><code>&lt;<mark>|</mark>&gt;</code></pre>
      <p>Try pressing the <kbd>&#8677;</kbd> key in these position, where <code><mark>|</mark></code> represent the text editor caret.</p>
      <pre><code>&lt;li&gt;abc<mark>|</mark>&lt;/li&gt;</code></pre>
      <p>Try pressing the <kbd>&#9003;</kbd> key in these position, where <code><mark>|</mark></code> represent the text editor caret.</p>
      <pre><code>&lt;p class="foo"&gt;&lt;/p&gt;<mark>|</mark></code></pre>
      <pre><code>&lt;p class="foo"&gt;<mark>|</mark>&lt;/p&gt;</code></pre>
      <pre><code>    <mark>|</mark></code></pre>
    </section>

    <footer>
      <span class="left">&copy; 2016 &middot; Made with <i class="icon icon-ambulance" onmouseover="this.className='icon icon-heart';" ontouchstart="this.className='icon icon-heart';"></i> by <a href="">Taufik Nurrohman</a></span>
      <span class="right"><a href="https://github.com/tovic/text-editor"><i class="icon icon-github"></i> GitHub</a></span>
    </footer>

    <script src="../../../text-editor.min.js"></script>
    <script src="../../ui.min.js"></script>
    <script src="../h-t-m-l.min.js"></script>
    <script src="../markdown.min.js"></script>
    <style>
.text-editor-view {
  background:#fff;
  color:#000;
  position:absolute;
  top:0;
  right:0;
  bottom:0;
  left:0;
  word-wrap:break-word;
  white-space:pre-wrap;
  overflow:auto;
}
.text-editor-view + .text-editor-content {
  background:none;
  color:transparent;
}
.text-editor-view code {font:inherit}
.text-editor-view.focus .caret:empty {
  display:inline-block;
  border-left:1px solid #f00;
  margin-left:-1px;
  -webkit-animation: blink 1.06s steps(1) infinite;
  -moz-animation: blink 1.06s steps(1) infinite;
  animation: blink 1.06s steps(1) infinite;
}
.text-editor-view.focus .caret:before {content:'\200C'}
@-moz-keyframes blink {
  0% {}
  50% {opacity:0}
  100% {}
}

@-webkit-keyframes blink {
  0% {}
  50% {opacity:0}
  100% {}
}

@keyframes blink {
  0% {}
  50% {opacity:0}
  100% {}
}
      .text-editor-view ._ {background:#ff0}
      .text-editor-view .k {font-weight:bold}
      .text-editor-view .v {color:#00f}
      .text-editor-view .c,.text-editor-view .language-markdown .q {color:#008000}
      .text-editor-view .h {color:#4682B4}
      .text-editor-view .n {color:#800080}
      .text-editor-view .w{color:#f00}
      .text-editor-view .language-markdown .c {color:#808080}
    </style>
    <script>

    TE.ui.color = {
        // common
        "": function(s) {
            return s.replace(/\s+$/gm, '<span class="_">$&</span>');
        },
        HTML: function(s) {
            return TE.ui.color[""](s.replace(/&lt;(([?!\/]?)([\w-:]+?)(\s[^<>]*?)?|(!--[\s\S]*?--))&gt;/g, function($, group, x, a, b) {
                // document type, XML header
                if (x === '!' || x === '?') {
                    // comment
                    if (x === '!' && a === '--' && b && b.slice(-2) === '--') {
                        return '<span class="c">&lt;' + group + '&gt;</span>';
                    }
                    return a[0] !== '-' ? '<span class="h">&lt;' + group + '&gt;</span>' : '&lt;' + group + '&gt;';
                }
                if (b) {
                    b = b.replace(/(\s+)([^\s=]+)(?:=("(?:\\.|[^"])*"|'(?:\\.|[^'])*'|[^\s"']+))?/g, function(a, b, c, d) {
                        var o = b + '<span class="k">' + c + '</span>';
                        if (d) {
                            o += '=<span class="v">' + d + '</span>';
                        }
                        return o;
                    });
                } else {
                    b = "";
                }
                return '&lt;' + x + '<span class="n k">' + a + '</span>' + b + '&gt;';
            }));
        },
        Markdown: function(s) {
            s = TE.ui.color.HTML(s);
            s = s.replace(/\*\*(?:\\.|.)+?\*\*/g, '<span class="k v">$&</span>');
            s = s.replace(/^.+?\n[=-]+$/gm, '<span class="k v">$&</span>');
            s = s.replace(/^#{1,6} +.+$/gm, '<span class="k v">$&</span>');
            s = s.replace(/__(?:\\.|.)+?__/g, '<span class="k v">$&</span>');
            s = s.replace(/\*(?:\\.|.)+?\*/g, '<span class="v">$&</span>');
            s = s.replace(/_(?:\\.|.)+?_/g, '<span class="v">$&</span>');
            s = s.replace(/`(?:\\.|.)+?`/g, '<span class="c">$&</span>');
            s = s.replace(/^~~~ *(?:[\w:.#="'-]+?)*\n(?:\\.|[\s\S])+?\n~~~|^(?:\t| {4})+.+$/gm, '<span class="c">$&</span>');
            s = s.replace(/^(?: *&gt;)+.+?$/gm, '<span class="q">$&</span>');
            s = s.replace(/^ {0,3}\*?\[.+?\]:.*?$/gm, '<span class="c">$&</span>');
            s = s.replace(/\[\^.+?\]/g, '<span class="c">$&</span>');
            s = s.replace(/!?\[.+?\](?:\[.+?\]|\(.+?\))/g, '<span class="w">$&</span>');
            return s;
        }
    };

    var editor = TE.ui.Markdown(document.querySelector('#editor'),{extra:1});

    var pre_1 = document.createElement('pre'),
        pre_2 = document.createElement('pre');

    var color = editor._.css(editor.target, ['background-color', 'color']),
        padding = editor._.css(editor.target, ['padding-top', 'padding-right', 'padding-bottom', 'padding-left']),
        font = editor._.css(editor.target, ['font-style', 'font-weight', '\0font-size', '\0line-height', 'font-family']);

    editor.ui.el.body.insertBefore(pre_1, editor.target || null);
    editor.ui.el.body.insertBefore(pre_2, editor.target || null);

    pre_1.className = editor.config.classes[""] + '-view';
    pre_1.style.padding = padding.join('px ') + 'px';
    pre_1.style.fontStyle = font[0];
    pre_1.style.fontWeight = font[1];
    pre_1.style.fontSize = font[2];
    pre_1.style.lineHeight = font[3];
    pre_1.style.fontFamily = font[4];

    pre_2.className = editor.config.classes[""] + '-view';
    pre_2.style.background = 'transparent';
    pre_2.style.color = 'transparent';
    pre_2.style.padding = padding.join('px ') + 'px';
    pre_2.style.fontStyle = font[0];
    pre_2.style.fontWeight = font[1];
    pre_2.style.fontSize = font[2];
    pre_2.style.lineHeight = font[3];
    pre_2.style.fontFamily = font[4];

    function content() {
        function x(s) {
            return s && s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/&(#0*34|quot);/g, '"').replace(/&(#0*39|apos);/g, "'") || "";
        }
        var code = '<code class="language-' + editor.type.toLowerCase() + '">',
            s = editor.$(),
            value = x(s.before) + '<span class="caret">' + x(s.value) + '</span>' + x(s.after),
            v = TE.ui.color[editor.type] ? TE.ui.color[editor.type](value.replace(/<.*?>/g, "")) : value;
        pre_1.innerHTML = code + v + '\n</code>';
        pre_2.innerHTML = code + value + '\n</code>';
    }

    function update(e) {
        if (e.type === 'blur') {
            pre_2.classList.remove('focus');
        } else if (e.type === 'focus') {
            pre_2.classList.add('focus');
        }
        setTimeout(content);
    }

    editor.target.addEventListener('scroll', function() {
        pre_1.scrollTop = this.scrollTop;
        pre_2.scrollTop = this.scrollTop;
        //content();
    }, false);

    editor.target.addEventListener('click', update, false);
    editor.target.addEventListener('focus', update, false);
    editor.target.addEventListener('blur', update, false);
    editor.target.addEventListener('keydown', update, false);
    editor.target.addEventListener('cut', update, false);
    editor.target.addEventListener('paste', update, false);

    </script>

    <script src="../../../index.min.js"></script>

  </body>
</html>